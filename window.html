<!DOCTYPE html>
<html>

<head>
    <title>window Keyboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #6e6e6e;
        }

        .keyboard-container {
            width: 1199px;
            padding: 20px;
            background-color: #e0e0e0;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .keyboard {
            display: flex;
            flex-direction: column;
            gap: 10px;
            background-color: #6e6e6e;
        }

        .row {
            display: flex;
            justify-content: center;
            gap: 5px;
        }

        .key {
            background-color: #ffffff;
            border: 1px solid #cccccc;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: bold;
            height: 40px;
            min-width: 40px;
            padding: 0 10px;
            transition: all 0.1s;
            position: relative;
        }

        .keys {
            background-color: #ffffff;
            border: 1px solid #cccccc;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: bold;
            height: 40px;
            min-width: 40px;
            padding: 0 10px;
            transition: all 0.1s;
            position: relative;
        }

        .key:active,
        .key.active {
            background-color: #e6e6e6;
            box-shadow: 0 0 2px rgba(0, 0, 0, 0.2);
            transform: translateY(2px);
        }

        .key-special {
            background-color: #d3d3d3;
        }

        .key-wide {
            min-width: 70px;
        }

        .key-extra-wide {
            min-width: 110px;
        }

        .key-super-wide {
            min-width: 270px;
        }

        .output {
            width: 100%;
            height: 100px;
            margin-bottom: 20px;
            padding: 10px;
            font-size: 18px;
            border-radius: 5px;
            border: 1px solid #cccccc;
            resize: none;
            box-sizing: border-box;
            text-align: center;
        }
    </style>
</head>

<body>
    <div class="keyboard-container">
        <h1 style="text-align: center;">window Keyboard</h1>

        <div class="keys"> <a style="text-decoration: none;" href="./index.html"> Back </a></div>
        <br>

        <textarea class="output" placeholder="Click your shortcut key buttons"></textarea>
        <div class="keyboard">
            <div class="row">
                <div class="key key-special" data-key="Escape">Esc</div>
                <div class="key" data-key="1">!</div>
                <div class="key" data-key="2">@</div>
                <div class="key" data-key="3">#</div>
                <div class="key" data-key="4">$</div>
                <div class="key" data-key="5">%</div>
                <div class="key" data-key="6">^</div>
                <div class="key" data-key="7">&</div>
                <div class="key" data-key="8">*</div>
                <div class="key" data-key="9">(</div>
                <div class="key" data-key="0">)</div>
                <div class="key" data-key="-">Prt Sc</div>
                <div class="key" data-key="Insert">Insert</div>
                <div class="key" data-key="Delete">Delete</div>
            </div>

            <div class="row">
                <div class="key key-special" data-key="`">~
                    <span style="margin-top: -15px;">`</span>
                </div>
                <div class="key" data-key="1">1</div>
                <div class="key" data-key="2">2</div>
                <div class="key" data-key="3">3</div>
                <div class="key" data-key="4">4</div>
                <div class="key" data-key="5">5</div>
                <div class="key" data-key="6">6</div>
                <div class="key" data-key="7">7</div>
                <div class="key" data-key="8">8</div>
                <div class="key" data-key="9">9</div>
                <div class="key" data-key="0">0</div>
                <div class="key" data-key="-">-</div>
                <div class="key" data-key="=">=</div>
                <div class="key key-wide key-special" data-key="Backspace">
                    Backspace</div>
            </div>
            <div class="row">
                <div class="key key-wide key-special" data-key="Tab">Tab</div>
                <div class="key" data-key="q">Q</div>
                <div class="key" data-key="w">W</div>
                <div class="key" data-key="e">E</div>
                <div class="key" data-key="r">R</div>
                <div class="key" data-key="t">T</div>
                <div class="key" data-key="y">Y</div>
                <div class="key" data-key="u">U</div>
                <div class="key" data-key="i">I</div>
                <div class="key" data-key="o">O</div>
                <div class="key" data-key="p">P</div>
                <div class="key" data-key="[">
                    <span style="margin-top: -15px;">{</span> [
                </div>
                <div class="key" data-key="]"><span style="margin-top: -15px;">}</span>]</div>
                <div class="key" data-key="\"><span style="margin-top: -15px;">|</span>\</div>
            </div>
            <div class="row">
                <div class="key key-wide key-special" data-key="CapsLock">CapsLock</div>
                <div class="key" data-key="a">A</div>
                <div class="key" data-key="s">S</div>
                <div class="key" data-key="d">D</div>
                <div class="key" data-key="f">F</div>
                <div class="key" data-key="g">G</div>
                <div class="key" data-key="h">H</div>
                <div class="key" data-key="j">J</div>
                <div class="key" data-key="k">K</div>
                <div class="key" data-key="l">L</div>
                <div class="key" data-key=";">
                    <span style="margin-top: -15px;" data-key="Colon">:</span>;
                </div>
                <div class="key" data-key="'">
                    <span style="margin-top: -15px;" data-key="Quotation Mark">"</span>'
                </div>
                <div class="key key-wide key-special" data-key="Enter">Enter</div>
            </div>
            <div class="row">
                <div class="key key-extra-wide key-special" data-key="Shift">Shift</div>
                <div class="key" data-key="z">Z</div>
                <div class="key" data-key="x">X</div>
                <div class="key" data-key="c">C</div>
                <div class="key" data-key="v">V</div>
                <div class="key" data-key="b">B</div>
                <div class="key" data-key="n">N</div>
                <div class="key" data-key="m">M</div>
                <div class="key" data-key=","><span style="margin-top: -15px;">&lt;</span>,</div>
                <div class="key" data-key="."><span style="margin-top: -15px;">&gt;</span>.</div>
                <div class="key" data-key="/">
                    <span style="margin-top: -15px;">?</span>
                    /
                </div>
                <div class="key key-extra-wide key-special" data-key="Shift">Shift</div>
                <div class="key" data-key="ArrowUp">↑</div>
            </div>
            <div class="row">
                <div class="key key-wide key-special" data-key="Control">Ctrl</div>
                <div class="key key-wide key-special" data-key="Meta">⌘</div>
                <div class="key key-wide key-special" data-key="Alt">Alt</div>
                <div class="key key-super-wide" data-key=" ">Space</div>
                <div class="key key-wide key-special" data-key="Alt">Alt</div>
                <div class="key key-wide key-special" data-key="Meta">⌘</div>
                <div class="key key-wide key-special" data-key="Control">Ctrl</div>
                <div class="key" data-key="ArrowLeft">←</div>
                <div class="key" data-key="ArrowDown">↓</div>
                <div class="key" data-key="ArrowRight">→</div>
            </div>
        </div>
    </div>

    <script>
        const output = document.querySelector('.output');
        const keys = document.querySelectorAll('.key');
        let pressedKeys = new Set();
        let isCapsLockOn = false;  // Track CapsLock state
    
        // Key combination definitions
        const keyCombinations = {
            "Control+c": "Copy",
            "Control+v": "Paste",
            "Shift+1": "Exclamation Mark",
            "Shift+2": "At Sign",
            "Shift+3": "Hash",
            "Shift+4": "Dollar Sign",
            "Shift+5": "Percent Sign",
            "Shift+6": "Caret",
            "Shift+7": "Ampersand",
            "Shift+8": "Asterisk",
            "Shift+9": "Left Parenthesis",
            "Shift+0": "Right Parenthesis",
            "Shift+;": ": Colon",
            "Shift+'": "Quotation Mark",
            "Shift+,": "< Less Than",
            "Shift+.": "> Greater Than",
            "Shift+/": "? Question Mark",
            "Control+z": "Undo",
            "Control+n": "New Window",
            "Control+x": "Cut",
            "Control+a": "Select All",
            "Control+s": "Save",
            "Control+f": "Find",
            "Control+p": "Print",
            "Control+q": "Quit App",
            "Control+w": "Close Window",
            "Control+h": "Hide Window",
            "Control+m": "Minimize Window",
            "Control+ ": "Spotlight Search",
            "Control+Alt+Escape": "Force Quit",
            "Control+Tab": "Switch between apps",
            "Control+Shift+3": "Capture Full Screen",
            "Control+Shift+4": "Capture Partial Screen",
            "Control+Shift+5": "Screen Recording & Screenshot Options",
            "Control+Alt+m": "Minimize all Windows",
            "Control+Shift+n": "New Folder",
            "Control+i": "Get Info",
            "Control+d": "Duplicate",
            "Control+b": "Bold",
            "Control+u": "Underline",
            "Control+t": "Show/Hide Fonts",
            "Control+ArrowUp": "Go to the top of the page",
            "Control+ArrowDown": "Go to the bottom of the page",
            "Control+ArrowLeft": "Move cursor to the beginning of the line",
            "Control+ArrowRight": "Move cursor to the end of the line",
            "Control+l": "Focus on URL bar",
            "Control+r": "Refresh Page",
            "Control+Shift+t": "Reopen last closed tab",
            "Control+Control+q": "Lock Screen",
            "Control+Alt+d": "Show/Hide the Dock",
            "Shift+[": "[+ Left Brace",
            "Shift+]": "]+ Right Brace",
            "Shift+\\": "| + Pipe",
            "Shift+ArrowUp": "Select Text Up",
            "Shift+ArrowDown": "Select Text Down",
            "Shift+ArrowLeft": "Select Text Left",
            "Shift+ArrowRight": "Select Text Right",
            "Shift+Tab": "Select Previous Field",
            "Shift+Control+ArrowUp": "Select to the Top",
            "Shift+Control+ArrowDown": "Select to the Bottom",
            "Shift+Control+ArrowLeft": "Select to the Beginning of the Line",
            "Shift+Control+ArrowRight": "Select to the End of the Line",
            "Shift+Control+Home": "Select to the Beginning of the Document",
            "Shift+Control+End": "Select to the End of the Document",
            "Shift+Control+PageUp": "Select to the Previous Page",
            "Control+Shift+g": "Go to Folder in Finder",
            "Shift{.": "[ Left Curly Brace",
            "Shift}.": "] + right Curly Brace",
            "Shift|.": "\\ + Backslash",
            "Control+Alt+h": "Hide all apps except the current one"
        };
    
        // Function to get the current key combination
        function getCurrentCombination() {
            const sortedKeys = Array.from(pressedKeys).sort();
            return sortedKeys.join('+');
        }
    
        // Function to check if current combination matches any defined shortcuts
        function checkCombination() {
            for (let combo in keyCombinations) {
                const comboKeys = combo.split('+');
                const allKeysPresent = comboKeys.every(key => pressedKeys.has(key));
                if (allKeysPresent && comboKeys.length === pressedKeys.size) {
                    return keyCombinations[combo];
                }
            }
            return null;
        }
    
        // Helper: Update letter keys display and dataset based on CapsLock state
        function updateLetterKeysCase() {
            keys.forEach(key => {
                let keyVal = key.dataset.key;
                if (keyVal && keyVal.length === 1 && keyVal.match(/[a-z]/i)) {
                    if (isCapsLockOn) {
                        key.dataset.key = keyVal.toUpperCase();
                        key.textContent = keyVal.toUpperCase();
                    } else {
                        key.dataset.key = keyVal.toLowerCase();
                        key.textContent = keyVal.toLowerCase();
                    }
                }
            });
        }
    
        // Function to get letter output considering Shift and CapsLock
        function getLetterOutput(key) {
            const isShiftPressed = pressedKeys.has('Shift');
            if (key.length === 1 && key.match(/[a-z]/i)) {
                if (isCapsLockOn) {
                    return isShiftPressed ? key.toLowerCase() : key.toUpperCase();
                } else {
                    return isShiftPressed ? key.toUpperCase() : key.toLowerCase();
                }
            }
            return key;
        }
    
        // Physical keyboard event listeners
        window.addEventListener('keydown', (e) => {
            let keyName = e.key;
    
            // Handle CapsLock toggle
            if (keyName === 'CapsLock') {
                isCapsLockOn = !isCapsLockOn;
                updateLetterKeysCase();
    
                keys.forEach(k => {
                    if (k.dataset.key === 'CapsLock') {
                        k.classList.toggle('active', isCapsLockOn);
                    }
                });
                // Don't add CapsLock to pressedKeys
                e.preventDefault();
                return;
            }
    
            // Normalize key names
            if (keyName === 'Control' || keyName === 'OS') keyName = 'Control';
            if (keyName === 'Option') keyName = 'Alt';
    
            pressedKeys.add(keyName);
    
            keys.forEach(k => {
                if (k.dataset.key.toLowerCase() === keyName.toLowerCase()) {
                    k.classList.add('active');
                }
            });
    
            const shortcutAction = checkCombination();
            if (shortcutAction) {
                e.preventDefault();
                output.value = `${getCurrentCombination().replace(/\+/g, ' + ')} = ${shortcutAction}`;
            } else {
                if (keyName.length === 1 && keyName.match(/[a-z]/i)) {
                    output.value = getLetterOutput(keyName);
                }
            }
    
            if (e.key === 'Backspace' && pressedKeys.size === 1) {
                output.value = '';
            }
        });
    
        window.addEventListener('keyup', (e) => {
            let keyName = e.key;
            if (keyName === 'Control' || keyName === 'OS') keyName = 'Control';
            if (keyName === 'Option') keyName = 'Alt';
    
            pressedKeys.delete(keyName);
    
            keys.forEach(k => {
                if (k.dataset.key.toLowerCase() === keyName.toLowerCase()) {
                    k.classList.remove('active');
                }
            });
        });
    
        // Virtual keyboard clicks
        keys.forEach(key => {
            key.addEventListener('mousedown', () => {
                let val = key.dataset.key;
    
                // Handle CapsLock toggle separately
                if (val === 'CapsLock') {
                    isCapsLockOn = !isCapsLockOn;
                    updateLetterKeysCase();
                    key.classList.toggle('active', isCapsLockOn);
                    return;
                }
    
                key.classList.add('active');
    
                if (val === 'Backspace') {
                    output.value = '';
                    pressedKeys.clear();
                    keys.forEach(k => k.classList.remove('active'));
                    return;
                }
    
                // Add modifiers or regular keys
                if (['Control', 'Alt', 'Shift', 'Meta'].includes(val)) {
                    pressedKeys.add(val);
                } else {
                    pressedKeys.add(val);
                }
    
                const shortcutAction = checkCombination();
                if (shortcutAction) {
                    output.value = `${getCurrentCombination().replace(/\+/g, ' + ')} = ${shortcutAction}`;
                } else {
                    if (val.length === 1 && val.match(/[a-z]/i)) {
                        output.value = getLetterOutput(val);
                    } else {
                        output.value = val;
                    }
                }
            });
    
            key.addEventListener('mouseup', () => {
                let val = key.dataset.key;
                key.classList.remove('active');
    
                // Keep modifier keys active until toggled off by double click
                if (!['Control', 'Alt', 'Shift', 'Meta', 'CapsLock'].includes(val)) {
                    pressedKeys.delete(val);
                }
            });
    
            // Double-click to toggle modifier keys (including CapsLock)
            key.addEventListener('dblclick', () => {
                let val = key.dataset.key;
                if (['Control', 'Alt', 'Shift', 'Meta', 'CapsLock'].includes(val)) {
                    if (pressedKeys.has(val)) {
                        pressedKeys.delete(val);
                        key.classList.remove('active');
                        if(val === 'CapsLock'){
                            isCapsLockOn = false;
                            updateLetterKeysCase();
                        }
                    } else {
                        pressedKeys.add(val);
                        key.classList.add('active');
                        if(val === 'CapsLock'){
                            isCapsLockOn = true;
                            updateLetterKeysCase();
                        }
                    }
                }
            });
        });
    </script>
    

    
</body>

</html>