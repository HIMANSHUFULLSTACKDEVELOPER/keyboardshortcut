<!DOCTYPE html>
<html>

<head>
    <title>Mac Keyboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #6e6e6e;
        }

        .keyboard-container {
            width: 1199px;
            padding: 20px;
            background-color: #e0e0e0;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .keyboard {
            display: flex;
            flex-direction: column;
            gap: 10px;
            background-color: #6e6e6e;
        }

        .row {
            display: flex;
            justify-content: center;
            gap: 5px;
        }

        .key {
            background-color: #ffffff;
            border: 1px solid #cccccc;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: bold;
            height: 40px;
            min-width: 40px;
            padding: 0 10px;
            transition: all 0.1s;
            position: relative;
        }

        .keys {
            background-color: #ffffff;
            border: 1px solid #cccccc;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: bold;
            height: 40px;
            min-width: 40px;
            padding: 0 10px;
            transition: all 0.1s;
            position: relative;
        }

        .key:active,
        .key.active {
            background-color: #e6e6e6;
            box-shadow: 0 0 2px rgba(0, 0, 0, 0.2);
            transform: translateY(2px);
        }

        .key-special {
            background-color: #d3d3d3;
        }

        .key-wide {
            min-width: 70px;
        }

        .key-extra-wide {
            min-width: 110px;
        }

        .key-super-wide {
            min-width: 270px;
        }

        .output {
            width: 100%;
            height: 100px;
            margin-bottom: 20px;
            padding: 10px;
            font-size: 18px;
            border-radius: 5px;
            border: 1px solid #cccccc;
            resize: none;
            box-sizing: border-box;
            text-align: center;
        }
    </style>
</head>

<body>
    <div class="keyboard-container">
        <h1 style="text-align: center;">Mac Keyboard</h1>

        <div class="keys"> <a style="text-decoration: none;" href="./index.html"> Back </a></div>
        <br>

        <textarea class="output" placeholder="Click your shortcut key buttons"></textarea>
        <div class="keyboard">
            <div class="row">
                <div class="key key-special" data-key="Escape">Esc</div>
                <div class="key" data-key="1">!</div>
                <div class="key" data-key="2">@</div>
                <div class="key" data-key="3">#</div>
                <div class="key" data-key="4">$</div>
                <div class="key" data-key="5">%</div>
                <div class="key" data-key="6">^</div>
                <div class="key" data-key="7">&</div>
                <div class="key" data-key="8">*</div>
                <div class="key" data-key="9">(</div>
                <div class="key" data-key="0">)</div>
                <div class="key" data-key="-">Prt Sc</div>
                <div class="key" data-key="Insert">Insert</div>
                <div class="key" data-key="Delete">Delete</div>
            </div>

            <div class="row">
                <div class="key key-special" data-key="`">~
                    <span style="margin-top: -15px;">`</span>
                </div>
                <div class="key" data-key="1">1</div>
                <div class="key" data-key="2">2</div>
                <div class="key" data-key="3">3</div>
                <div class="key" data-key="4">4</div>
                <div class="key" data-key="5">5</div>
                <div class="key" data-key="6">6</div>
                <div class="key" data-key="7">7</div>
                <div class="key" data-key="8">8</div>
                <div class="key" data-key="9">9</div>
                <div class="key" data-key="0">0</div>
                <div class="key" data-key="-">-</div>
                <div class="key" data-key="=">=</div>
                <div class="key key-wide key-special" data-key="Backspace">
                    Backspace</div>
            </div>
            <div class="row">
                <div class="key key-wide key-special" data-key="Tab">Tab</div>
                <div class="key" data-key="q">Q</div>
                <div class="key" data-key="w">W</div>
                <div class="key" data-key="e">E</div>
                <div class="key" data-key="r">R</div>
                <div class="key" data-key="t">T</div>
                <div class="key" data-key="y">Y</div>
                <div class="key" data-key="u">U</div>
                <div class="key" data-key="i">I</div>
                <div class="key" data-key="o">O</div>
                <div class="key" data-key="p">P</div>
                <div class="key" data-key="[">
                    <span style="margin-top: -15px;">{</span> [
                </div>
                <div class="key" data-key="]"><span style="margin-top: -15px;">}</span>]</div>
                <div class="key" data-key="\"><span style="margin-top: -15px;">|</span>\</div>
            </div>
            <div class="row">
                <div class="key key-wide key-special" data-key="CapsLock">CapsLock</div>
                <div class="key" data-key="a">A</div>
                <div class="key" data-key="s">S</div>
                <div class="key" data-key="d">D</div>
                <div class="key" data-key="f">F</div>
                <div class="key" data-key="g">G</div>
                <div class="key" data-key="h">H</div>
                <div class="key" data-key="j">J</div>
                <div class="key" data-key="k">K</div>
                <div class="key" data-key="l">L</div>
                <div class="key" data-key=";">
                    <span style="margin-top: -15px;" data-key="Colon">:</span>;
                </div>
                <div class="key" data-key="'">
                    <span style="margin-top: -15px;" data-key="Quotation Mark">"</span>'
                </div>
                <div class="key key-wide key-special" data-key="Enter">Enter</div>
            </div>
            <div class="row">
                <div class="key key-extra-wide key-special" data-key="Shift">Shift</div>
                <div class="key" data-key="z">Z</div>
                <div class="key" data-key="x">X</div>
                <div class="key" data-key="c">C</div>
                <div class="key" data-key="v">V</div>
                <div class="key" data-key="b">B</div>
                <div class="key" data-key="n">N</div>
                <div class="key" data-key="m">M</div>
                <div class="key" data-key=","><span style="margin-top: -15px;">&lt;</span>,</div>
                <div class="key" data-key="."><span style="margin-top: -15px;">&gt;</span>.</div>
                <div class="key" data-key="/">
                    <span style="margin-top: -15px;">?</span>
                    /
                </div>
                <div class="key key-extra-wide key-special" data-key="Shift">Shift</div>
                <div class="key" data-key="ArrowUp">↑</div>
            </div>
            <div class="row">
                <div class="key key-wide key-special" data-key="Control">Ctrl</div>
                <button class="key" data-key="Command">⌘ Command</button>
                <div class="key key-wide key-special" data-key="Alt">Alt</div>
                <div class="key key-super-wide" data-key=" ">Space</div>
                <div class="key key-wide key-special" data-key="Alt">Alt</div>
                <button class="key" data-key="Command">⌘ Command</button>
                <div class="key key-wide key-special" data-key="Control">Ctrl</div>
                <div class="key" data-key="ArrowLeft">←</div>
                <div class="key" data-key="ArrowDown">↓</div>
                <div class="key" data-key="ArrowRight">→</div>
            </div>
        </div>
    </div>
    
<script>const output = document.querySelector('.output');
    const keys = document.querySelectorAll('.key');
    let pressedKeys = new Set();
    
    // Shortcut combos with Command key instead of Meta
    const keyCombinations = {
        "Command+c": "Copy",
        "Command+v": "Paste",
        "Shift+1": "Exclamation Mark",
        "Shift+2": "At Sign",
        "Shift+3": "Hash",
        "Shift+4": "Dollar Sign",
        "Shift+5": "Percent Sign",
        "Shift+6": "Caret",
        "Shift+7": "Ampersand",
        "Shift+8": "Asterisk",
        "Shift+9": "Left Parenthesis",
        "Shift+0": "Right Parenthesis",
        "Shift+;": ": Colon",
        "Shift+'": "Quotation Mark",
        "Shift+,": "< + Less Than",
        "Shift+.": ">+ Greater Than",
        "Shift+[": "[+ Left Brace",
        "Shift+]": "]+ Right Brace",
        "Shift+\\": "| + Pipe",
        "Shift+/": "? question mark , /",
        "Shift+ArrowUp": "Select Text Up",
        "Shift+ArrowDown": "Select Text Down",
        "Shift+ArrowLeft": "Select Text Left",
        "Shift+ArrowRight": "Select Text Right",
        "Shift+Tab": "Select Previous Field",
        "Shift+Control+ArrowUp": "Select to the Top",
        "Shift+Control+ArrowDown": "Select to the Bottom",
        "Shift+Control+ArrowLeft": "Select to the Beginning of the Line",
        "Shift+Control+ArrowRight": "Select to the End of the Line",
        "Shift+Control+Home": "Select to the Beginning of the Document",
        "Command+z": "Undo",
        "Command+n": "New Window",
        "Command+x": "Cut",
        "Command+a": "Select All",
        "Command+s": "Save",
        "Command+f": "Find",
        "Command+p": "Print",
        "Command+q": "Quit App",
        "Command+w": "Close Window",
        "Command+h": "Hide Window",
        "Command+m": "Minimize Window",
        "Command+ ": "Spotlight Search",
        "Command+Alt+Escape": "Force Quit",
        "Command+Tab": "Switch between apps",
        "Command+Shift+3": "Capture Full Screen",
        "Command+Shift+4": "Capture Partial Screen",
        "Command+Shift+5": "Screen Recording & Screenshot Options",
        "Command+Alt+m": "Minimize all Windows",
        "Command+Shift+n": "New Folder",
        "Command+i": "Get Info",
        "Command+d": "Duplicate",
        "Command+b": "Bold",
        "Command+u": "Underline",
        "Command+t": "Show/Hide Fonts",
        "Command+ArrowUp": "Go to the top of the page",
        "Command+ArrowDown": "Go to the bottom of the page",
        "Command+ArrowLeft": "Move cursor to the beginning of the line",
        "Command+ArrowRight": "Move cursor to the end of the line",
        "Command+l": "Focus on URL bar",
        "Command+r": "Refresh Page",
        "Command+Shift+t": "Reopen last closed tab",
        "Control+Command+q": "Lock Screen",
        "Command+Alt+d": "Show/Hide the Dock",
        "Command+Shift+g": "Go to Folder in Finder",
        "Command+Alt+h": "Hide all apps except the current one"
    };
    
    // Helper: Check if Shift is pressed
    function isShiftPressed() {
        return pressedKeys.has('Shift');
    }
    
    // Convert letter key with Shift to uppercase else lowercase
    function getLetterOutput(key) {
        if (key.length === 1 && key.match(/[a-z]/i)) {
            return isShiftPressed() ? key.toUpperCase() : key.toLowerCase();
        }
        return key;
    }
    
    // Get sorted current pressed combination string
    function getCurrentCombination() {
        const sortedKeys = Array.from(pressedKeys).sort();
        return sortedKeys.join('+');
    }
    
    // Check if current pressed keys match a defined combo
    function checkCombination() {
        for (let combo in keyCombinations) {
            const comboKeys = combo.split('+');
            const allKeysPresent = comboKeys.every(key => pressedKeys.has(key));
            if (allKeysPresent && comboKeys.length === pressedKeys.size) {
                return keyCombinations[combo];
            }
        }
        return null;
    }
    
    // Physical keyboard event listeners
    window.addEventListener('keydown', (e) => {
        let keyName = e.key;
    
        // Normalize modifier keys
        if (keyName === 'Meta' || keyName === 'OS') keyName = 'Command';
        if (keyName === 'Option') keyName = 'Alt';
    
        pressedKeys.add(keyName);
    
        // Highlight virtual key if exists
        keys.forEach(k => {
            if (k.dataset.key.toLowerCase() === keyName.toLowerCase()) {
                k.classList.add('active');
            }
        });
    
        const shortcutAction = checkCombination();
    
        if (shortcutAction) {
            e.preventDefault();
            output.value = `${getCurrentCombination().replace(/\+/g, ' + ')} = ${shortcutAction}`;
        } else {
            // Show letters with shift logic
            if (keyName.length === 1 && keyName.match(/[a-z]/i)) {
                output.value = getLetterOutput(keyName);
            }
        }
    
        // Clear output on Backspace key alone
        if (e.key === 'Backspace' && pressedKeys.size === 1) {
            output.value = '';
        }
    });
    
    window.addEventListener('keyup', (e) => {
        let keyName = e.key;
        if (keyName === 'Meta' || keyName === 'OS') keyName = 'Command';
        if (keyName === 'Option') keyName = 'Alt';
    
        pressedKeys.delete(keyName);
    
        keys.forEach(k => {
            if (k.dataset.key.toLowerCase() === keyName.toLowerCase()) {
                k.classList.remove('active');
            }
        });
    });
    
    // Virtual keyboard support: click, release, double-click
    keys.forEach(key => {
        key.addEventListener('mousedown', () => {
            let val = key.dataset.key;
    
            key.classList.add('active');
    
            // Clear output on Backspace click
            if (val === 'Backspace') {
                output.value = '';
                pressedKeys.clear();
                keys.forEach(k => k.classList.remove('active'));
                return;
            }
    
            // Add modifiers or regular keys
            if (['Command', 'Alt', 'Control', 'Shift'].includes(val)) {
                pressedKeys.add(val);
            } else {
                pressedKeys.add(val);
            }
    
            const shortcutAction = checkCombination();
    
            if (shortcutAction) {
                output.value = `${getCurrentCombination().replace(/\+/g, ' + ')} = ${shortcutAction}`;
            } else {
                // Output letter with Shift or lowercase
                if (val.length === 1 && val.match(/[a-z]/i)) {
                    output.value = getLetterOutput(val);
                } else {
                    output.value = val;
                }
            }
        });
    
        key.addEventListener('mouseup', () => {
            let val = key.dataset.key;
            key.classList.remove('active');
    
            // Remove non-modifier keys on mouseup
            if (!['Command', 'Alt', 'Control', 'Shift'].includes(val)) {
                pressedKeys.delete(val);
            }
        });
    
        // Toggle modifier keys on double click
        key.addEventListener('dblclick', () => {
            let val = key.dataset.key;
            if (['Command', 'Alt', 'Control', 'Shift'].includes(val)) {
                if (pressedKeys.has(val)) {
                    pressedKeys.delete(val);
                    key.classList.remove('active');
                } else {
                    pressedKeys.add(val);
                    key.classList.add('active');
                }
            }
        });
    });
    </script>
</body>

</html>